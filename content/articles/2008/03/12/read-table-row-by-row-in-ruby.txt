--- 
title: Read table row-by-row in ruby
filter: erb
blog_post: true
layout: blog/post
created_at: 2008-03-12 12:05:15 +11:00
keywords: ruby rails
---
<p>
I needed to export some data from a huge data table. Iterating through MyModel.find took too long and too much ram, so I went straight to the db instead. 
</p>

Example code was tough to find, so here's an example:

<pre class="code">
sql = "select * from #{ MyModel.table_name }"
MyModel.connection.execute(sql) do |handle|
  handle.fetch do |row|
    # row is an array of values
    ... export row ...
  end
end
</pre>
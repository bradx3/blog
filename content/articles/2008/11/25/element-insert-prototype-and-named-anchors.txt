--- 
title: Element.insert, Prototype and named anchors
filter: erb
blog_post: true
layout: blog/post
created_at: 2008-11-25 11:46:11 +11:00
keywords: html,prototype
---
<p>This was a strange one.</p>

<p>
HTML:
<% coderay(:lang => "html", :line_numbers => :list) do -%>
<a name="questions">
<div class="questions">
</div>
<% end -%>
</p>
<p>
JS:
<% coderay(:lang => "javascript", :line_numbers => :list) do -%>
Element.insert("questions", { bottom : "<div>Test</div>" })
<% end -%>
</p>
<p>
With that setup, IE compains and says "Invalid source HTML for this operation". It turns out that prototype was trying to put the div into the a tag. I guess I can see how it happened, but I sure didn't expect it. 
</p>
<p>
Anyway I removed the a tag completely and everything works fine. Weird.
</p>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
   <meta http-equiv="content-type" content="text/html; charset=utf-8" />
   <title>2009</title>
   <meta name="author" content="" />

   <!--- Blueprint CSS Framework -->
   <link rel="stylesheet" href="/css/blueprint/screen.css" type="text/css" media="screen, projection" />
   <link rel="stylesheet" href="/css/blueprint/print.css" type="text/css" media="print" />

   <!-- CodeRay syntax highlighting CSS -->
   <link rel="stylesheet" href="/css/coderay.css" type="text/css" />

   <!-- Homepage CSS -->
   <link rel="stylesheet" href="/css/site.css" type="text/css" media="screen, projection" />
   <link rel="stylesheet" href="/css/style.css" type="text/css" />

   <!-- SyntaxHighlighter -->
   <script type="text/javascript" src="/scripts/shCore.js"></script>
   <script type="text/javascript" src="/scripts/shBrushBash.js"></script>
   <script type="text/javascript" src="/scripts/shBrushJScript.js"></script>
   <script type="text/javascript" src="/scripts/shBrushPlain.js"></script>
   <script type="text/javascript" src="/scripts/shBrushRuby.js"></script>
   <script type="text/javascript" src="/scripts/shBrushSql.js"></script>
   <script type="text/javascript" src="/scripts/shBrushXml.js"></script>
   <link type="text/css" rel="stylesheet" href="/styles/shCore.css"/>
   <link type="text/css" rel="stylesheet" href="/styles/shThemeDefault.css"/>
   <script type="text/javascript">
     SyntaxHighlighter.config.clipboardSwf = 'scripts/clipboard.swf';
     SyntaxHighlighter.all();
   </script>
</head>
<body>

<div class="container">

   <div class="column span-20 prepend-2 append-2 first last" id="header">
     <a href="/">
       <img src="/images/banner.gif" alt="Lucky-Dip Blog"/>
     </a>
   </div>

   <div class="column span-15 prepend-2 first content">
      <h2>2009</h2>

<div class="article">
  <h1><a href="/articles/2009/09/07/fundation/">Fundation</a><span class="date">(2009-09-07)</span></h1>

  <div class="body">
    <p>
  I've kept my saving in a single, high interest account for a while now. It
  works particularly well as a contractor in that I can put aside tax and GST
  and earn interest on that before I have to pay it to the government.
</p>
<p>
  It has been a bit difficult to keep track of how much money was saving, and how
  much was tax/GST though, so I've written a simple app to keep track.
</p>
<p>
  <a href="http://fundation.lucky-dip.net">Fundation</a> lets you set up
  funds to manage your saving. Each paycheck can be automatically divided up
  into the different funds in ratios you specify.
</p>
<p>
  Anyway, <a href="http://fundation.lucky-dip.net">Fundation</a> is free to use,
  so if you're having trouble remembering how much money you've got to spend, give it
  a try <a href="http://fundation.lucky-dip.net">here</a>.
</p>
<p>
  If you have any errors in Fundation, or any suggestions for improvements,
  please use the comments of this post to provide them.
</p>

  </div>
</div>
<div class="article">
  <h1><a href="/articles/2009/08/06/restart-passenger-from-emacs-using-rinari/">Restart Passenger From Emacs Using Rinari</a><span class="date">(2009-08-06)</span></h1>

  <div class="body">
    <p>
Being able to completely re-program your editor is fun. I feel like I've got a 
long way to go before I'm an Emacs Guru (if anybody *ever* becomes a true
Emacs Guru), but it's nice being able to easily
automate things I do in my editor.
</p>
<p>
I've been experimenting with using <a href="http://www.modrails.com/">Passenger</a>
in development instead of script/server. It's not too bad. It's nice to have
a server always ready to go, but it does make dropping down to the debugger
difficult.
</p>
<p>
Anyway, here is a small snippet of emacs lisp to easily restart the Passenger
server for the project you are currently working on. It assumes you have 
<a href="http://rinari.rubyforge.org/">Rinari</a> installed.

<h4>The function:</h4>
<pre class="brush: plain">
(defun restart-passenger ()
  "Restart passenger using the current rinari root" (interactive)
  (shell-command (concat "touch " (rinari-root) "tmp/restart.txt")))
</pre>
<h4>And to bind it to a key</h4>
<pre class="brush: plain">
(global-set-key (kbd "C-c ' p") 'restart-passenger)
</pre>
</p>

  </div>
</div>
<div class="article">
  <h1><a href="/articles/2009/07/24/my-backup-script/">My Backup Script</a><span class="date">(2009-07-24)</span></h1>

  <div class="body">
    <p>
  This is my simple backup script. It keeps everything I don't already have backed up 
  in version control safe and sound from hardware failure. Not from me though - 
  if I delete a file accidentally, that file is really gone
  (unless you act fast before the next backup runs!). 
  If I make a bad edit, that file is busted.
  <br />
  <br />
  But I can live with that. 
</p>

<p>
  <h3>backup.rb</h3>
  Backup.rb uses rsync over ssh to backup a number of different server. Rsync is good
  because it only sends what changed, so we're not transferring gigs every night.
  <br /><br />
  You'll have to make some changes to the SSH_USER, REMOTE_DIR and HOSTS constants. 
  You could also add any file types you want to ignore to the EXCLUDES list.

  <pre class="brush: ruby">
#!/usr/bin/env ruby

NAME = %x{ hostname }.strip
SSH_USER = "brad"
REMOTE_DIR = "/home/brad/Backups/#{ NAME }"

HOSTS = [ "clamps", "hubert.lucky-dip.net" ]
DIRS = [
        "~/Library", 
        "~/Documents",
        "~/Pictures"
]
EXCLUDES = [
            "*Cache*",
            "*NewsFire*",
            "*Cookies*",
            "*.log",
            "HistoryIndex.ox*",
            "*Virtual Machines*",
            "*.resume",
            "*.ipsw",
            "*.dmg",
            "*.corrupt"
]

HOSTS.each do |host|
  DIRS.each do |dir|
    puts "--------------------------------------------"
    excludes = EXCLUDES.map { |e| "--exclude \"#{ e }\"" }.join(' ')
    cmd = "rsync -av --delete --delete-excluded "
    cmd += " --rsh=\"ssh -l #{ SSH_USER }\" "
    cmd += " #{ dir } #{ host }:#{ REMOTE_DIR } #{ excludes }"
    puts cmd
    system(cmd)
  end
end
  </pre>
</p>
<p>
  <h3>Crontab</h3>
  With the crontab below, a backup will be run every night at 10pm
  <pre class="brush: bash">
    0 22 * * * /Users/brad/projects/scripts/backup.rb
  </pre>
</p>

  </div>
</div>
<div class="article">
  <h1><a href="/articles/2009/07/10/creating-a-jruby-rails-project/">Creating a jruby rails project</a><span class="date">(2009-07-10)</span></h1>

  <div class="body">
    <p>
For some reason, this command:
<pre class="brush: bash">
jruby -S gem install mongrel activerecord-jdbcmysql-adapter rails
</pre>
didn't install all the required gems I needed.
</p>
<p>
Manually listing all the basic rails gems needed fixed the problem for me though. Working command:
<pre class="brush: bash">
jruby -S gem install mongrel activerecord-jdbcmysql-adapter rails \
activesupport actionmailer activerecord actionpack activeresource
</pre>

  </div>
</div>
<div class="article">
  <h1><a href="/articles/2009/03/30/kill-all-rinari-buffers-in-emacs/">Kill All Rinari Buffers in Emacs</a><span class="date">(2009-03-30)</span></h1>

  <div class="body">
    <p>
I've been using Emacs for development for a few months now and am pretty happy with it. 
</p>
<p>
I use the Rinari mode to provide some help when I'm working on Rails projects. Once I'm finished for the day (or changing
to another project, I used to use the kill-some-buffers command and go through them one by one.
</p>
<p>
Here's some elisp that I've written and put in my .emacs file that just kills all buffers that link to files
that are in the current rinari-root. It's probably not perfect, but it seems to work most of the time.
</p>
<pre class="brush: plain">
;; some rinari helpers
(defun kill-buffers-in-subdir (subdir buffer)
  "Kills the given buffer if it is linked to a file in the current rinari project."
  (if (buffer-in-subdir-p subdir buffer)
     (kill-buffer buffer)))

(defun buffer-in-subdir-p (subdir buffer) 
  "Returns true if buffer belongs to the current rinari project"
  (and (buffer-file-name buffer)
       (string-match subdir (buffer-file-name buffer))))

(defun kill-all-rinari-buffers ()
  "Kills all buffers linked to the current rinari project"
  (interactive)
  (let ((path (rinari-root)))
    (if path
	(dolist (buffer (buffer-list))
	  (kill-buffers-in-subdir path buffer)))))
</pre>

  </div>
</div>
<div class="article">
  <h1><a href="/articles/2009/03/12/omniweb-using-webkit4/">Omniweb Using Webkit From Safari 4</a><span class="date">(2009-03-12)</span></h1>

  <div class="body">
    <p>
  I'm a big fan of the <a href="http://www.omnigroup.com/applications/omniweb">Omniweb</a> web browser. I've had some problems with it being a bit slow in the past, but that seems to have been fixed with the latest <a href="http://www.omnigroup.com/applications/omniweb/download/sneakypeek">Nightly Builds</a>. The latest build has brought in the same Webkit as used by Safari 4, so it's fast. Really fast.
</p>
<p> 
  Add that to all the features I like, and I'm a happy web browser. Things I miss when I'm not using Omniweb.
  <ul>
    <li>Vertical Tab Bar - I have a wide screen, and a lot of tabs open</li>
    <li>Workspaces - I can put my house hunting links in one workspace, then keep them handy, but hide them while I work</li>
    <li>Mac (?) font rendering. Something about Firefox's font just looks wrong</li>
    <li>Built in ad-blocking. It's no Adblock Plus, but I don't mind seeing ads. It's just the flashing ones I hate</li>
    <li>Location bar hides, shows when I hit Apple-L, then hides again. I don't know what I'm doing wrong on other browsers, but I can never get this to work reliably.</li>
    <li>And heaps more...</li>
  </ul>
  It's a good browser. It's good enough I paid for it, but it's free now. Nice one OmniGroup.
</p>

  </div>
</div>
<div class="article">
  <h1><a href="/articles/2009/02/19/blog-running-on-webby/">Blog Running on Webby</a><span class="date">(2009-02-19)</span></h1>

  <div class="body">
    <p>
  The server this blog runs on hosts a few things for - email, a few sites and some git repositories. It's got 512mb or ram, but rubygems and even git can get pretty greedy at times. I finally had enough.
</p>
<p>
  Typo and mysql were only being used for the blog and were taking up a heap or ram. I looked around and <a href="http://webby.rubyforge.org/">Webby</a> seemed a good fit. 
</p>
<p>
  I've managed to convert the old articles and comments to Webby and Disqus format. There's currently some problems with the comments not displaying, so I'll have to fix that, but I can live with that for now.
</p>
<p>
  Anyway if anybody notices any problems, please leave a comment and I'll get it fixed up. Unless it's a problem posting comments. 
</p>
<p>
  <strong>
    Update: Comments are display fine now. Wooh.
  </strong>
</p>

  </div>
</div>
<div class="article">
  <h1><a href="/articles/2009/02/10/time-to-go/">Time To Go</a><span class="date">(2009-02-10)</span></h1>

  <div class="body">
    <p>I've just released my first iPhone application.</p>

<p>Time To Go is designed to be the quickest way to tell when the train you need to catch leaves. I use it just before I leave work to know whether I need to run to the station to catch the next train.</p>

<p>There'll be a dedicated page up to log any timetable errors soon, but for now please leave any errors or suggestions in the comments for this blog post.</p>

<p>
<a href="http://itunes.apple.com/WebObjects/MZStore.woa/wa/viewSoftware?id=304313690&mt=8">iTunes Store URL</a></p>

<p>
Screenshot:<br /><br />
<a href="http://itunes.apple.com/WebObjects/MZStore.woa/wa/viewSoftware?id=304313690&mt=8"><img src="/images/screenshot.jpg" /></a></p>

  </div>
</div>
<div class="article">
  <h1><a href="/articles/2009/01/21/badged-dock-icon-for-iphone-xcode-development/">Badged Dock Icon for IPhone XCode development</a><span class="date">(2009-01-21)</span></h1>

  <div class="body">
    <p><a href="http://twitter.com/drnic">Dr Nic</a> made a good suggestion on Twitter for a way to badge the XCode icon with the one currently in use.</p>

<p>
Here's my attempt:
<a href="http://gist.github.com/49767">http://gist.github.com/49767</a>
</p>

<p>It relies on ImageMagick being installed (port install ImageMagick) and should be run from the project's directorin in the terminal.</p>


  </div>
</div>

   </div>

   <div class="column span-5 append-2 last sidebar">
     <h4>About</h4>
     <div>
       <img src="/images/brad_head.gif" />
       <p>My name is Brad. I am a programmer from Sydney, Australia. I like lots of coding stuff, but especially ruby and iPhone.
       </p>
       <p>I am available for contracting work. Contact me at brad at lucky-dip.net</p>
     </div>

     <h4>What I'm...</h4>
     <div>
       <ul>
       <li><a href="http://github.com/bradx3">Working on</a></li>
       <li><a href="http://twitter.com/bradx3">Thinking</a></li>
       </ul>
     </div>

     <h4>Syndicate</h4>
     <div>
       <a href="/feed.xml">RSS</a>
     </div>

   </div>

   <div class="column span-20 prepend-2 append-2 first last" id="footer">
     <hr />
     <p>This website was created with <a href="http://webby.rubyforge.org">Webby</a></p>
   </div>

</div>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-10322890-1");
pageTracker._trackPageview();
} catch(err) {}</script>

</body>
</html>

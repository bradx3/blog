<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
   <meta http-equiv="content-type" content="text/html; charset=utf-8" />
   <title>Kill All Rinari Buffers in Emacs</title>
   <meta name="author" content="" />

   <!--- Blueprint CSS Framework -->
   <link rel="stylesheet" href="/css/blueprint/screen.css" type="text/css" media="screen, projection" />
   <link rel="stylesheet" href="/css/blueprint/print.css" type="text/css" media="print" />

   <!-- CodeRay syntax highlighting CSS -->
   <link rel="stylesheet" href="/css/coderay.css" type="text/css" />

   <!-- Homepage CSS -->
   <link rel="stylesheet" href="/css/site.css" type="text/css" media="screen, projection" />
   <link rel="stylesheet" href="/css/style.css" type="text/css" />

   <!-- SyntaxHighlighter -->
   <script type="text/javascript" src="/scripts/shCore.js"></script>
   <script type="text/javascript" src="/scripts/shBrushBash.js"></script>
   <script type="text/javascript" src="/scripts/shBrushJScript.js"></script>
   <script type="text/javascript" src="/scripts/shBrushPlain.js"></script>
   <script type="text/javascript" src="/scripts/shBrushRuby.js"></script>
   <script type="text/javascript" src="/scripts/shBrushSql.js"></script>
   <script type="text/javascript" src="/scripts/shBrushXml.js"></script>
   <link type="text/css" rel="stylesheet" href="/styles/shCore.css"/>
   <link type="text/css" rel="stylesheet" href="/styles/shThemeDefault.css"/>
   <script type="text/javascript">
     SyntaxHighlighter.config.clipboardSwf = 'scripts/clipboard.swf';
     SyntaxHighlighter.all();
   </script>
</head>
<body>

<div class="container">

   <div class="column span-20 prepend-2 append-2 first last" id="header">
     <a href="/">
       <img src="/images/banner.gif" alt="Lucky-Dip Blog"/>
     </a>
   </div>

   <div class="column span-15 prepend-2 first content">
      <div class="article">
    <h1>
      <a href="/articles/2009/03/30/kill-all-rinari-buffers-in-emacs/">Kill All Rinari Buffers in Emacs</a>
      <span class="date">
	(2009-03-30)
      </span>
    </h1>
     <div class="body">
       <p>
I've been using Emacs for development for a few months now and am pretty happy with it. 
</p>
<p>
I use the Rinari mode to provide some help when I'm working on Rails projects. Once I'm finished for the day (or changing
to another project, I used to use the kill-some-buffers command and go through them one by one.
</p>
<p>
Here's some elisp that I've written and put in my .emacs file that just kills all buffers that link to files
that are in the current rinari-root. It's probably not perfect, but it seems to work most of the time.
</p>
<pre class="brush: plain">
;; some rinari helpers
(defun kill-buffers-in-subdir (subdir buffer)
  "Kills the given buffer if it is linked to a file in the current rinari project."
  (if (buffer-in-subdir-p subdir buffer)
     (kill-buffer buffer)))

(defun buffer-in-subdir-p (subdir buffer) 
  "Returns true if buffer belongs to the current rinari project"
  (and (buffer-file-name buffer)
       (string-match subdir (buffer-file-name buffer))))

(defun kill-all-rinari-buffers ()
  "Kills all buffers linked to the current rinari project"
  (interactive)
  (let ((path (rinari-root)))
    (if path
	(dolist (buffer (buffer-list))
	  (kill-buffers-in-subdir path buffer)))))
</pre>

     </div>
     <div><div id="disqus_thread"></div>
<script type="text/javascript" src="http://disqus.com/forums/lucky-dipblog/embed.js"></script><noscript><a href="http://lucky-dipblog.disqus.com/?url=ref">View the discussion thread.</a></noscript><a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a></div>
 
</div>

   </div>

   <div class="column span-5 append-2 last sidebar">
     <h4>About</h4>
     <div>
       <img src="/images/brad_head.gif" />
       <p>My name is Brad. I am a programmer from Sydney, Australia. I like lots of coding stuff, but especially ruby and iPhone.
       </p>
       <p>I am available for contracting work. Contact me at brad at lucky-dip.net</p>
     </div>

     <h4>What I'm...</h4>
     <div>
       <ul>
       <li><a href="http://github.com/bradx3">Working on</a></li>
       <li><a href="http://twitter.com/bradx3">Thinking</a></li>
       </ul>
     </div>

     <h4>Syndicate</h4>
     <div>
       <a href="/feed.xml">RSS</a>
     </div>

   </div>

   <div class="column span-20 prepend-2 append-2 first last" id="footer">
     <hr />
     <p>This website was created with <a href="http://webby.rubyforge.org">Webby</a></p>
   </div>

</div>

<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-19254782-1']);
  _gaq.push(['_setDomainName', '.lucky-dip.net']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>

</body>
</html>
